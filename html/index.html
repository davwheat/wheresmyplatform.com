<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Where's my platform?</title>
    <meta name="description" content="Check which London stations aren't reporting platform numbers correctly." />

    <link rel="stylesheet" href="styles.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Hanken+Grotesk:wght@100..900&display=swap" rel="stylesheet" />

    <script src="https://unpkg.com/maplibre-gl@^5.6.1/dist/maplibre-gl.js" defer></script>
    <link href="https://unpkg.com/maplibre-gl@^5.6.1/dist/maplibre-gl.css" rel="stylesheet" />

    <script src="map.js" defer></script>

    <!-- Preload svgs -->
    <link rel="preload" href="/check.svg" as="image" />
    <link rel="preload" href="/error.svg" as="image" />
    <link rel="preload" href="/warning.svg" as="image" />
  </head>
  <body>
    <div id="topPage">
      <header>
        <h1>Where's my platform?</h1>
        <p>London Terminals with platform allocations being reported in open data</p>
      </header>

      <div id="map" class="loading"></div>

      <div id="scrollEncourager">
        <svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="currentColor">
          <path
            d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"
          />
        </svg>
      </div>
    </div>

    <main>
      <section>
        <h2>What's going on?</h2>

        <p>
          The GB rail industry uses a system called <a href="https://www.nationalrail.co.uk/developers/darwin-data-feeds/">Darwin</a> to provide
          real-time information about trains, including platform numbers, delays, cancellations, diversions and more. Typically this information
          is detected automatically when trains enter or exit stations, but at larger stations platform information is artificially hidden until
          a predetermined "boarding time".
        </p>

        <p>
          At these stations, it is up to staff to unhide the platform information when it is time to board a service, and the local customer
          information system (CIS) will then update the platform information on the station displays, and within the wider Darwin system so that
          third parties can use and display the details to users.
        </p>

        <p>
          Frustratingly, some stations are failing to connect to the wider Darwin system, meaning that when these changes are made, they are not
          propogated to users of the open data.
        </p>
      </section>

      <section>
        <h2>What does that mean for me?</h2>

        <p>
          Do you track your train with an app? Or using nationalrail.co.uk? If so, you won't be seeing platform numbers for your trains. If
          you're in a rush, that could be the difference between making and missing your train.
        </p>

        <p>
          And, for the open data community, it means that we can't make the most of
          <a href="https://wiki.openraildata.com/index.php/Projects">our projects</a>.
        </p>
      </section>

      <section>
        <h2>The data</h2>

        <p>
          This table shows the London stations and what proportion of recent services had platform data associated with them, excluding cancelled
          services and services which have not yet departed.
        </p>

        <table id="stationList" class="loading">
          <thead>
            <tr>
              <th>Station</th>
              <th colspan="2">Has platform info</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="3">
                <div class="loader"></div>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>

    <footer>
      <img id="nre" src="/nre_powered.png" alt="Powered by National Rail Enquiries" />

      <p>
        Platform information (or lack thereof) provided
        <a href="https://www.nationalrail.co.uk/developers/darwin-data-feeds/">under license by National Rail</a>
      </p>

      <p>
        <a href="https://github.com/davwheat/wheresmyplatform.com">View the source code</a>
      </p>
    </footer>
  </body>
</html>
